@startuml Диаграмма контейнеров
title "C4. Контейнеры"

!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Container.puml
!$ICONURL = "https://raw.githubusercontent.com/tupadr3/plantuml-icon-font-sprites/v3.0.0/icons"
!include $ICONURL/common.puml
!include $ICONURL/devicons/react.puml
!include $ICONURL/devicons/go.puml
!include $ICONURL/devicons2/sqlite.puml

Person(client, "Клиент", "Заказ такси, отслеживание поездки, оплата и рейтинг водителей")
Person(driver, "Водитель", "Получение заказов, выполнение поездок, отправка фото документов и отчетов")
Person(admin, "Администратор", "Управление пользователями, настройка системы, аналитика и отчеты")

System_Boundary(taxiService, "Такси Сервис") {
    Container(frontend, "Мобильное приложение", "React Native", $sprite="react")
    Rel(client, frontend, "Использует", "HTTP/HTTPS")
    Rel(driver, frontend, "Использует", "HTTP/HTTPS")
    
    Container(orderService, "Сервис распределения заказов", "Go", $sprite="go")
    Rel(frontend, orderService, "API вызовы", "HTTPS/REST")

    Container(paymentService, "Платежная система", "Go", $sprite="go")
    Rel(frontend, paymentService, "API вызовы", "HTTPS/REST")

    Container(photoControlService, "Система фотоконтроля", "Go", $sprite="go")
    Rel(frontend, photoControlService, "API вызовы", "HTTPS/REST")
    
    Container(userService, "Сервис пользователей", "Go", $sprite="go")
    Rel(frontend, userService, "API вызовы", "HTTPS/REST")

    Container(loggingService, "Сервис логирования", "Go", $sprite="go")
    Rel(orderService, loggingService, "Записывает события", "HTTPS/REST")
    Rel(paymentService, loggingService, "Записывает события", "HTTPS/REST")
    Rel(photoControlService, loggingService, "Записывает события", "HTTPS/REST")

    Container(analyticsService, "Сервис аналитики", "Go", $sprite="go")
    Rel(admin, analyticsService, "Получение отчетов", "HTTPS/REST")
}

System_Ext(paymentSystem, "Платежная система", "Обработка платежей")
Rel(paymentService, paymentSystem, "Передает запросы на обработку", "HTTPS/REST")

System_Ext(orderDistribution, "Система распределения заказов", "Распределение заказов среди водителей")
Rel(orderService, orderDistribution, "Передает информацию о заказах", "HTTPS/REST")

System_Ext(photoControl, "Система фотоконтроля", "Отправка фото документов водителями")
Rel(photoControlService, photoControl, "Передает фото документов", "HTTPS/REST")
